run:
  # timeout for analysis
  deadline: 10m

issues:
  # Skip autogenerated files for mobile and gRPC as well as copied code for
  # internal use.
  exclude-files:
    - "\\.pb\\.go$"
  exclude-rules:
    # Exclude some linters from running on tests files.
    - path: _test\.go
      linters:
        - gosec
    # files with mock in the name are excluded from gosec
    - path: .*mock.*
      linters:
        - gosec

linters:
  disable-all: true
  enable:
    # enabled by default
    - errcheck
    - gosimple
    - govet
    - ineffassign
    - staticcheck
    - unparam
    - bodyclose

    # style
    - dupl
    - errname
    - forbidigo
    - goimports
    - nlreturn
    - revive
    - tagliatelle
    - whitespace

    # bugs
    - errorlint
    - gosec
    - noctx

linters-settings:
  gofmt:
    rewrite-rules:
      - pattern: "interface{}"
        replacement: "any"
      - pattern: "a[b:len(a)]"
        replacement: "a[b:]"

  tagliatelle:
    case:
      rules:
        json: camel

  forbidigo:
    forbid:
      - p: \.NewClient$
        pkg: github.com/dapr/go-sdk/client
        msg: "dapr.NewClient is not allowed. Use daprutils.NewClient instead"

      - p: Repository.Reset$
        pkg: github.com/Elenpay/ep-backend/ep-lib/db/persistence/postgres
        msg:
          You will rarely need to call a Database Reset as it wipe all tables.
          If you are sure, use //nolint:forbidigo to skip this check.

      # convoy/pkg/log gets imported by some IDEs instead of logrus because
      # they expose similar functions.
      - pkg: github.com/frain-dev/convoy/pkg/log

      # gofrs/uuid gets imported by some IDEs instead of google/uuid because
      # they expose similar functions.
      - pkg: github.com/gofrs/uuid
    analyze-types: true
     
  revive:
    rules:
      - name: duplicated-imports
        severity: warning
        disabled: false